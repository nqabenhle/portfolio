{% extends "portfolio/layout.html" %}

{% block title %} Projects {% endblock %}

{% block body %}
<section id="projects">
    <div class="container">
        <p><div class="header">Projects</div></p>
        <div class="row">
            {% for project in projects %}
                <div class="col-sm-12 col-md-6 col-lg-4">
                    <div class="card">
                        <div class="show">
                            <iframe class="skeleton" width="100%" height="210px" src="{{ project.embed_link }}" 
                                title="YouTube video player" frameborder="0" 
                                allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture" 
                                allowfullscreen>
                            </iframe>
                        </div>
                        <div class="info">
                            <div class="header text-start">
                                <p>{{ project.name }}</p>
                            </div>
                            <div class="content text-start about">{{ project.about }}</div>
                            <div class="content text-start languages">
                                <div class="stack-header">Languages used:</div>
                                {% for language, percentage in project.languages.items %}
                                    <div>{{ language }}:</div> 
                                    <div class="stack" data-percentage="{{ percentage }}"></div>
                                {% endfor %}
                            </div>
                            <div class="text-end">
                                <span class="learn-more"><a href="{{ project.github_repo }}" target="_blank">Github Repo</a></span>
                            </div>
                        </div>                    
                    </div>
                </div>
            {% endfor %}
        </div>
    </div>
</section>

<script>
    document.querySelectorAll(".stack").forEach(stack => {
        stack.style.width = `${stack.dataset.percentage}%`;
    });
</script>
{% endblock %}